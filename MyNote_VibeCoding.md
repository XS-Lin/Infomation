# Vibe Coding #

## 基本 ##

### プロンプト原則 ###

[oreilly 生成AIのプロンプトエンジニアリング](https://www.oreilly.co.jp/books/9784814401246/)

1. 方向性を示す
1. 出力形式を指定する
1. 例を示す
1. 品質を評価する
1. タスクを分割する

### メタ・プロンプト ###

[Meta Prompting](https://www.promptingguide.ai/techniques/meta-prompting)

- 情報の形式とパターンを重視し、より抽象的で構造化された方法を構築すること

### ツール類 ###

- 開発
  - Jules
    - Cloud で実行する開発ツール
  - Antigravity
    - ローカルで実行する開発ツール
    - Julesより高度な機能がある。体感は変わらない。

- ライブラリー
  - Langchain

## 例 ##

### テストデータ作成ツール ###

- プロンプト作成
  - LLMと会話で、要件をまとめてからプロンプト生成（例）

~~~txt
# IN
Antigravity の使ってデータベースのスキーマをもとにテストデータを生成するアプリを作りたい。そのプロンプトを作成してください。対象データベースはMySQLとSpanner、言語はPython、主要ライブラリはlangchain、背後のLLMはGemini。主要機能はMySQLとSpannerからスキーマを取得、スキーマの物理名やコメントをGeminiに送信してテスト生成したもらい、結果を取得してJson形式で保存する。また、Json形式のデータをMySQLとSpannerへ投入できる機能を実装する。

# OUT
私は、MySQLとGoogle Spannerのデータベーススキーマを活用し、テストデータを自動生成・投入するPythonアプリケーションを作成したい。このタスクを、Planning Modeで以下の要件に従って段階的に実行せよ。

## 🎯 要件

### 1. ターゲットデータベース
* **MySQL:** スキーマ取得、テストデータ投入
* **Google Spanner:** スキーマ取得、テストデータ投入

### 2. 使用技術
* **言語:** Python
* **LLMフレームワーク:** LangChain（スキーマのLLMへのプロンプト作成とレスポンス処理に使用）
* **LLM:** Gemini (高精度なテストデータ生成に使用)
* **データベース接続:** MySQLは `mysql-connector-python`、Spannerは `google-cloud-spanner` を使用する。
* **データ形式:** 入出力および中間ファイルは全てJSON形式とする。

### 3. 主要機能 (コアモジュール)
1.  **Schema Fetcher (スキーマ取得):**
    * 指定されたデータベース（MySQLまたはSpanner）に接続し、テーブル名、**カラムの物理名**、**データ型**、**コメント（論理名）**、**NOT NULL制約**などの情報を取得する。
    * 取得した情報をLangChainが処理しやすい形式（例: JSONまたは辞書）に整形する。
2.  **Data Generator (データ生成):**
    * 取得したスキーマ情報と、ユーザーが提供する**「生成指示」**プロンプト（例: 「10件の架空の顧客データを生成せよ」）をLangChainを通じてGeminiに送信する。
    * Geminiに対して、**生成されるデータは必ずスキーマ定義に準拠したJSON形式**（Key=カラム物理名）で返すよう指示する。
    * GeminiからのJSONレスポンスを検証し、ファイルに保存する。
3.  **Data Loader (データ投入):**
    * 生成・保存されたJSONファイルを受け取り、対応するデータベース（MySQLまたはSpanner）のテーブルに、**バルクインサート**または**バッチ処理**でデータを投入する。

### 4. 実行手順と制約
1.  まず、上記の要件に基づき、**具体的な作業リスト（Planning Mode）**を詳細に作成し、**私の承認を待て。**
2.  **環境変数**または**設定ファイル**からデータベース接続情報（ホスト名、ユーザー名、パスワード、プロジェクトIDなど）を安全に読み込む処理を優先して実装せよ。
3.  `Data Generator` モジュールでは、LangChainの**Structured Output**や**Pydantic Schema**を利用して、Geminiが**厳密にJSON形式でデータを返す**ように制御すること。

## 📝 Antigravityへの指示

以上の要件を満たすアプリケーションを開発するための作業リスト（Planning Mode）を構成し、承認を求めること。作業リストは、初期セットアップ、コアモジュールごとの実装、検証のステップに分けること。
~~~

- コード生成
  - 上記プロンプトを適宜編集して、Antigravityにコピーして実行
